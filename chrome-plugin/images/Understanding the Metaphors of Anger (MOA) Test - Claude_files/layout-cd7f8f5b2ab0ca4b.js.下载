(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{21403:function(e,t,n){Promise.resolve().then(n.bind(n,71062))},71062:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(27573),u=n(6762),a=n(90578);function o(e){let{children:t}=e;return(0,r.jsx)(u.hH,{children:(0,r.jsx)(a.Z,{children:t})})}},96755:function(e,t,n){"use strict";n.d(t,{Ck:function(){return v},IR:function(){return h},Pd:function(){return m},WQ:function(){return d},_y:function(){return g},gq:function(){return _},k7:function(){return C},ml:function(){return f},uV:function(){return c},wO:function(){return s},xo:function(){return i},yU:function(){return l},yq:function(){return p}});var r=n(83041),u=n(11492),a=n(35146),o=n(84983);let c=()=>(0,r.WE)("/api/legal",{staleTime:1/0,meta:{noToast:!0}}),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useIsClaudeDot)();return(0,r.uC)("/api/auth/send_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useIsClaudeDot)();return(0,r.uC)("/api/auth/send_magic_link","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useIsClaudeDot)();return(0,r.uC)("/api/auth/exchange_nonce_for_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useIsClaudeDot)();return(0,r.uC)("/api/auth/verify_magic_link","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useIsClaudeDot)();return(0,r.uC)("/api/auth/verify_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useIsClaudeDot)();return(0,r.uC)("/api/auth/verify_google","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.useIsClaudeDot)();return(0,r.uC)("/api/auth/accept_invite","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},g=()=>(0,r.uC)("/api/auth/logout","POST"),p=()=>{let e=(0,o.useQueryClient)();return(0,r.uC)("/api/account","PUT",{async onSuccess(){await e.invalidateQueries([a.aY])}})},v=()=>(0,r.Ne)("/api/account","PUT",(e,t)=>(null==t?void 0:t.account)?{...t,account:{...t.account,settings:e}}:t,{queryKey:[a.aY],transformVariables:e=>({settings:e})}),C=()=>{let e=(0,o.useQueryClient)();return(0,r.uC)("/api/account/accept_legal_docs","PUT",{async onSuccess(){await e.invalidateQueries([a.aY])}})};function _(e){return(0,r.WE)("/api/signups/".concat(e),{enabled:!!e})}},31271:function(e,t,n){"use strict";n.d(t,{K5:function(){return g},Ql:function(){return y},Z1:function(){return S},_A:function(){return v},nJ:function(){return C},rN:function(){return p},wy:function(){return _},z6:function(){return h},zW:function(){return w}});var r=n(11492),u=n(23532),a=n(16096),o=n(59374),c=n(14983);n(88337);var i=n(54603),s=n(7653),l=n(80248),f=n(96755),d=n(31257);let h=()=>{let e=(0,i.useRouter)(),t=(0,u.useCookies)();return{refresh:()=>{e.refresh()},switchAndRefresh:(e,n)=>{t.set(c.cn.LAST_ACTIVE_ORG,e),n?location.pathname=n:location.reload()}}},m=e=>{let{account:t}=(0,a.useCurrentAccount)(),{value:n}=(0,l.useGate)("claudia");return t&&((0,d.wJ)({account:t,isClaudeDot:e})||(0,d.c6)(t,e))?"/onboarding":t&&(0,d.kK)(t,e)?"/invites":t&&(0,d.D_)(t,e)?"/create":e?n?"/new":"/chats":"/dashboard"};function g(e){let{value:t}=(0,l.useGate)("show_affirmative_consent"),{value:n}=(0,l.useGate)("show_affirmative_consent_for_privacy_policy");return(0,s.useMemo)(()=>[...t===e?["aup","consumer-terms"]:[],...n===e?["privacy"]:[]],[n,t,e])}let p=(e,t,n)=>{let{data:r}=(0,f.uV)(),{mutateAsync:u}=(0,f.k7)();return(0,s.useCallback)(async()=>{if(!e||!r||0===t.length)return;let a=t.map(e=>({document_id:r[e],accepted_via_checkbox:n}));await u({acceptances:a})},[e,r,t,u,n])},v=(e,t)=>{let{account:n,refetch:r,setActiveOrganizationUUID:u}=(0,a.useCurrentAccount)(),[c,i]=(0,s.useState)(!1),[l,d]=(0,s.useState)(!1),h=C(),{addSuccess:m}=(0,o.useToasts)(),{data:g}=(0,f.gq)(e);return(0,s.useEffect)(()=>{n&&c&&l&&(t?t(h):h())},[l,h,c,n,t]),(0,s.useCallback)(async()=>{i(!0),await r(),(null==g?void 0:g.organization_uuid)&&(u(g.organization_uuid),m("Successfully joined ".concat(g.organization_name))),d(!0)},[g,m,r,u])},C=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,i.useSearchParams)().get("returnTo"),n=_(e);return(0,s.useCallback)(()=>{n(t)},[n,t])},_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{account:t}=(0,a.useCurrentAccount)(),[n,u]=(0,s.useState)(!1),o=(0,i.useRouter)(),[c,l]=(0,s.useState)(null),f=(0,i.usePathname)(),h=(0,i.useSearchParams)(),g=(0,r.useIsClaudeDot)(),p=m(g);return(0,s.useEffect)(()=>{(n||e)&&!t&&o.push((0,d.C2)(f,h.toString()))},[t,o,n,e,f,h]),(0,s.useEffect)(()=>{if(n&&t){let e=(0,d.eX)(t,c,p,g);o.push(e)}},[t,o,n,c,p,g]),(0,s.useCallback)(e=>{e&&l(e),u(!0)},[])};function S(){let[e,t]=(0,s.useState)(!1);return{getRecaptchaToken:(0,s.useCallback)(async(e,n)=>(t(!0),new Promise((r,u)=>{if("undefined"==typeof grecaptcha)return t(!1),u(Error("Recaptcha failed to load"));grecaptcha.enterprise.ready(()=>{grecaptcha.enterprise.execute(e,{action:n}).then(e=>{r(e),t(!1)},e=>{t(!1),u(e)})})})),[]),isLoading:e}}function y(e){let[t,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!t){let t=setInterval(()=>{window.grecaptcha&&(n(!0),e())},10);return()=>clearInterval(t)}},[t,n,e])}let w=()=>{let{account:e}=(0,a.useCurrentAccount)(),{config:t}=(0,l.useConfig)("public_email_domains");return t.get("domains",[]).some(t=>null==e?void 0:e.email_address.endsWith("@".concat(t)))}},31257:function(e,t,n){"use strict";function r(e,t){for(let n of e.invites)if(n.organization.capabilities&&n.organization.capabilities.includes(t))return n}n.d(t,{C2:function(){return l},D_:function(){return c},G9:function(){return f},M:function(){return r},c6:function(){return a},cG:function(){return i},eX:function(){return s},kK:function(){return o},wJ:function(){return u}});let u=e=>{let{account:t,isClaudeDot:n}=e,r=!1===t.settings.has_finished_claudeai_onboarding;return!t.full_name||!t.display_name||!!n&&r},a=(e,t)=>t&&!e.completed_verification_at,o=(e,t)=>!!r(e,t?"raven":"api"),c=(e,t)=>!t&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,i=(e,t)=>u({account:e,isClaudeDot:t})||a(e,t)||o(e,t)||c(e,t),s=(e,t,n,r)=>{if(!t||!t.startsWith("/"))return n;if(i(e,r)){let e=new URLSearchParams({returnTo:t});return"".concat(n,"?").concat(e.toString())}return f(t)},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/login",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u="".concat(e,"?").concat(t),a=new URLSearchParams(r);return a.append("returnTo",u),"".concat(n,"?").concat(a.toString())};function f(e){let t=new URL(e,"http://example.com");return t.pathname+t.search}},39850:function(e,t,n){"use strict";n.r(t),n.d(t,{ConsentProvider:function(){return m},useConsent:function(){return g}});var r=n(27573),u=n(14983),a=n(27794),o=n.n(a),c=n(7653),i=n(43316),s=n(23532),l=n(91600),f=n(21728),d=n(83243);let h=(0,c.createContext)({showConsentBanner:!1,openConsentBanner:o(),preferences:d.iw,savePreferences:o()}),m=e=>{let{children:t,requiresExplicitConsent:n}=e,[a,o,m]=function(e,t){let n=(0,s.useCookies)(),[r,u]=(0,c.useState)(()=>!!n.get(e)),[a,o]=(0,c.useState)(()=>{try{let r=n.get(e);return r?JSON.parse(r):t}catch(n){return(0,i.Tb)(n,{extra:{message:"Malformed JSON cookie",cookieKey:e}}),t}});return[a,(0,c.useCallback)(t=>{n.set(e,JSON.stringify(t)),o(t),u(!0)},[n,e]),r]}(u.cn.CONSENT_PREFERENCES,n?d.iw:d.DF),[g,p]=(0,c.useState)(n&&!m),v=(0,c.useCallback)(e=>{o(e),(0,l.HF)(e),p(!1),f.u.updateCategories(e)},[o,p]);return(0,r.jsx)(h.Provider,{value:{showConsentBanner:g,openConsentBanner:()=>p(!0),preferences:a,savePreferences:v},children:t})};function g(){return(0,c.useContext)(h)}},59374:function(e,t,n){"use strict";n.r(t),n.d(t,{ErrorsProvider:function(){return o},useToasts:function(){return c}});var r=n(27573),u=n(7653);let a=(0,u.createContext)(void 0);function o(e){let{children:t}=e,n=(0,u.useRef)(1),[o,c]=(0,u.useState)([]),i=(0,u.useCallback)(e=>{let t=n.current++;return c(n=>[...n,{id:t,message:e instanceof Error?e.message:e,toastType:"error"}]),t},[]),s=(0,u.useCallback)(e=>{let t=n.current++;return c(n=>[...n,{id:t,message:e instanceof Error?e.message:e,toastType:"success"}]),t},[]),l=(0,u.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e))},[]),f=(0,u.useMemo)(()=>({toasts:o,addError:i,addSuccess:s,clearToast:l}),[o,i,s,l]);return(0,r.jsx)(a.Provider,{value:f,children:t})}function c(){let e=(0,u.useContext)(a);if(!e)throw Error("Must be called within ErrorsProvider");return e}},91600:function(e,t,n){"use strict";n.d(t,{HF:function(){return a},bq:function(){return u}});var r=n(43316);let u=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),u=1;u<t;u++)n[u-1]=arguments[u];try{"function"==typeof window.gtag&&gtag(e,...n)}catch(e){(0,r.Tb)(e)}},a=e=>{u("consent","update",o(e))},o=e=>({ad_personalization:e.marketing?"granted":"denied",ad_user_data:e.marketing?"granted":"denied",ad_storage:e.marketing?"granted":"denied",analytics_storage:e.analytics?"granted":"denied",functionality_storage:"granted",personalization_storage:"granted",security_storage:"granted"})},92627:function(e,t,n){"use strict";n.d(t,{R:function(){return c}});var r=n(23203),u=n.n(r),a=n(7653);let o=(e,t)=>e===window.localStorage?"LSS-".concat(t):"SSS-".concat(t);function c(e,t){return function(e,t,n){let[r,c]=(0,a.useState)(()=>{if(null===e)return n;try{let r=e.getItem(o(e,t));return r?JSON.parse(r):n}catch(e){return console.log(e),n}}),i=(0,a.useRef)(u()(r=>{if(null!==e)try{if(JSON.stringify(r)===JSON.stringify(n)){e.removeItem(o(e,t));return}e.setItem(o(e,t),JSON.stringify(r))}catch(e){console.log(e)}},250)),s=(0,a.useCallback)(()=>{c(n),setTimeout(()=>{null!==e&&(i.current.cancel(),e.removeItem(o(e,t)))},0)},[c,n,e,t]);return(0,a.useEffect)(()=>{i.current(r)},[r]),[r,c,s]}(window.localStorage,e,t)}},76987:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(27573);function u(e){let{size:t=16}=e;return(0,r.jsx)("svg",{width:t,height:t,viewBox:"0 0 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M20 4h-4.3l7.7 19.5h4.2L20 4ZM7.6 4 0 23.5h4.3L6 19.4h8l1.6 4h4.3L12.1 4H7.7Zm-.4 11.8 2.6-6.9 2.7 6.9H7.3Z"})})}},23904:function(e,t,n){"use strict";n.r(t),n.d(t,{ThemeProvider:function(){return l},useTheme:function(){return g}});var r=n(27573),u=n(23532),a=n(92627),o=n(14983),c=n(7653);let i="(prefers-color-scheme: dark)",s=(0,c.createContext)(void 0);function l(e){let{pathTheme:t,initialTheme:n,children:o}=e,[l,h]=(0,c.useState)(n),m=(0,u.useCookies)(),[g,p]=(0,a.R)("userThemeMode","auto");(0,c.useEffect)(()=>{f(t)},[t]),(0,c.useEffect)(()=>f(l),[l]),(0,c.useEffect)(()=>d(g,m),[m,g]);let v=(0,c.useCallback)(()=>d(g,m),[m,g]);return(0,c.useEffect)(()=>{if("auto"!==g)return;let e=window.matchMedia(i);return e.addEventListener("change",v),()=>e.removeEventListener("change",v)},[g,v]),(0,r.jsx)(s.Provider,{value:{theme:l,mode:g,setMode:p,setTheme:h},children:o})}let f=e=>{"undefined"!=typeof document&&(document.documentElement.dataset.theme=e,h())},d=(e,t)=>{if("undefined"==typeof document)return;let n=m(e);t.set(o.cn.COLOR_MODE,n),document.documentElement.dataset.mode=n,h()},h=()=>{let[e,t,n]=getComputedStyle(document.documentElement).getPropertyValue("--bg-200").split(" "),r="hsl(".concat(e,",").concat(t,",").concat(n,")"),u=document.querySelector('meta[name="theme-color"]');u||((u=document.createElement("meta")).setAttribute("name","theme-color"),document.head.appendChild(u)),u.setAttribute("content",r)},m=e=>{var t;return"auto"!==e?e:(null===(t=window)||void 0===t?void 0:t.matchMedia(i).matches)?"dark":"light"},g=()=>{let e=(0,c.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}}},function(e){e.O(0,[248,5319,3040,7992,3528,5495,6895,2848,3688,9329,1911,3674,4592,7314,7035,1875,9106,2217,8494,4354,4534,202,578,1293,1362,8114,1744],function(){return e(e.s=21403)}),_N_E=e.O()}]);